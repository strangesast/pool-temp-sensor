http {
  server {
    server_name raspberrypi;

    gzip on;
    gzip_static on;    
    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
    gzip_proxied any;
    gzip_vary on;
    gzip_comp_level 6;
    gzip_buffers 16 8k;
    gzip_http_version 1.1; 

    root /var/www/

    location /api/ {
      proxy_pass         http://api:3000;
      proxy_redirect     off;
      proxy_set_header   Host $host;
      proxy_set_header   X-Real-IP $remote_addr;
      proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header   X-Forwarded-Host $server_name;
    }

    location / {
      gunzip on;
      index index.html;
    }


  }

  #server {
  #  server_name another.server.url;

  #  location /yourService1 {
  #    proxy_pass http://localhost:80;
  #    rewrite ^/yourService1(.*)$ $1 break;
  #  }

  #  location /yourService3 {
  #    proxy_pass http://localhost:5001;
  #    rewrite ^/yourService1(.*)$ $1 break;
  #  }
  #}
}
